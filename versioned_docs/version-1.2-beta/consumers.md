---
sidebar_position: 5
title: "⌨️ 消费者"
---

# 消费者
APIPark 提供了 **API 门户** 功能，用户可以将服务发布到 API 门户并且被其他用户查看、订阅和调用。

在 APIPark 中，**消费者（Consumer）** 是 **订阅服务** 和 **调用API** 的实体，消费者通过订阅服务来获得调用服务内API的权限，确保数据安全和访问权限合规。

为了保证安全、规范地使用 API，并且降低 API 的管理成本。用户需要先创建 **消费者**，并通过消费者订阅服务，然后再使用消费者的 **授权证书** 来调用 API。

![](images/2024-10-28-23-05-08.png)


## 创建消费者

订阅 API 服务之前，你需要先创建一个**消费者（Consumer）**，消费者是 **订阅服务** 和 **调用API** 的实体，消费者通过订阅服务来获得调用服务内API的权限，确保数据安全和访问权限合规。

进入 **工作空间** 模块，在侧边栏中选择 **消费者**，然后 **创建消费者**，填写：

- **消费者名称**
- **消费者 ID**：消费者的唯一标识，一旦保存无法修改。
- **描述**

![](images/2024-10-28-23-09-51.png)

## 添加授权证书

APIPark 通过 **授权证书** 限制 **消费者** 对 API 资源的访问，确保只有经过批准的消费者或应用程序才能访问特定的 API。

进入 **消费者** 的管理界面，在侧边栏选择 **授权证书**，然后点击 **创建授权证书**，在弹窗中填写：

- **证书名称**：为了便于管理密钥，建议为密钥设置清晰易懂的名称。
- **认证类型**：证书的认证方式，包括Basic Auth、API Key、JWT、AK/SK等，每个认证方式有不同的参数填写位置和密钥规则。
- **参数位置**：密钥填写的位置。
- **密钥**：请求 APIPark 的 API 时，需要在请求参数中填写密钥。为了避免数据泄露，请不要将密钥存储在公开的代码中。
- **过期时间**：授权证书默认是永不过期，如果你希望创建一个临时的授权证书，比如仅三个月有效，可以填写过期时间。通过过期的授权证书访问 APIPark 时，APIPark 会返回授权证书失效的错误提示。
- **隐藏认证信息**：APIPark 的 API 网关默认会在转发 API 请求时，将消费者的授权证书发送给上游（Upstream）服务，便于上游服务对授权进行二次验证。如果勾选该选项，则 APIPark 在转发API请求时会隐藏授权信息。

![](images/2024-10-28-23-15-15.png)

## 使用消费者来订阅服务

如需使用消费者来订阅服务，请查看 [🔗 订阅 API 服务](developer_portal.md)。

## 通过消费者来调用 API

如果需要调用服务的 API，请查看 [🔗 调用 API](call_api.md)

🎉APIPark 还刚刚起步，我们期待与开源爱好者共同探索 AI+API 的无限可能。您的每个 Issue 对我们来说都至关重要。

🙏如果 APIPark 对您有所帮助，请在 GitHub 上为我们点亮星星，让更多人发现 APIPark。 [访问Github](https://github.com/APIParkLab/APIPark) 
